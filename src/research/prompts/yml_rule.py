# ymlファイルを書くうえでのルールを記述したプロンプトをまとめてください
from research.log_output.log import log


def get_yml_rules(branch_name:str):
    log("info", "GitHub Actionsのyml記述ルールを取得しました。")
    YML_RULES = f"""
      書き方についてのルール:
      - インデントは GitHub Actions の公式仕様に沿ってください
      - 必ず on: と jobs: を含む完全な GitHub Actions YAML 構造にしてください
      - コメントは#で始めてください
      - ジョブ、ステップの内容を必ずコメントで説明してください
      ジョブやステップについてのルール:
      - on:のイベントにはpush(ブランチは{branch_name})のみを指定してください、ただしコメントで他のイベントの追加の仕方を説明してください
      - ビルドとテストの2つのジョブのみ作成してください
      - Lintの実行などビルドとテスト以外の処理はビルドやテストに必要となる時以外は含めず、コメントアウトしたなかで説明してください
      - ビルドとテストのジョブを独立して実行できる場合はneedsキーでの指定を避けてください、ただしコメントで説明してください
      - キャッシュは使用せず、コメントアウトしたなかで説明してください
      - ジョブは適切に必要最低限のpermissionを設定してください
      - ジョブでは必ず適切なタイムアウトを設定してください
      - アクションのバージョンは必ずメジャーバージョンで指定してください。バージョンが古いと指摘された場合は、バージョンの数字を1つ上げてください（例：v4 → v5）。
      - コミットSHAへの変換は生成後にツールで行うので、ghalintによるエラーが出ていたとしても考える必要はありません。
      - actions/checkout アクションを使用するときは必ず適切にpersist-credentialsを設定してください
      - ジョブやステップには必ずnameキーでわかりやすく簡潔な名前をつけてください
      - 必ずバージョンを指定して記述してください
      その他のルール:
      - YAML の内容だけを出力してください。Markdown の ```yaml や ``` は出力しないでください。
      生成例：
      name: CI
      on: 
        push:
          branches:
            - {branch_name}
      jobs:
        build:
          ...  # ビルドジョブの詳細
        tests:
          ...  # テストジョブの詳細
      """
    return YML_RULES
